<!DOCTYPE html>
<html>

<head>
    <title>User CRUD App</title>
</head>

<body>
    <h1>User CRUD App</h1>
    <h2>Create User</h2>
    <form id="userForm">
        <input type="text" id="name" placeholder="Name" required>
        <input type="email" id="email" placeholder="Email" required>
        <button type="submit">Create</button>
    </form>

    <h2>Users</h2>
    <ul id="userList"></ul>

    <script>
        const userForm = document.getElementById('userForm');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const userList = document.getElementById('userList');

        // Function to fetch and display users
        function getUsers() {
            fetch('http://13.229.232.201/api/users')
                .then((response) => response.json())
                .then((data) => {
                    userList.innerHTML = '';
                    data.forEach((user) => {
                        const listItem = document.createElement('li');
                        listItem.textContent = `Name: ${user.name}, Email: ${user.email}`;
                        userList.appendChild(listItem);
                    });
                });
        }

        // Initial fetch and display of users
        getUsers();

        // Handle form submission to create a new user
        userForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = nameInput.value;
            const email = emailInput.value;

            fetch('http://13.229.232.201/api/users', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: name.value, email: email.value }), // Use name.value and email.value
            })
                .then((response) => response.json())
                .then((data) => {
                    if (data.message) {
                        getUsers();
                        nameInput.value = '';
                        emailInput.value = '';
                    }
                });
        });
    </script>
</body>

</html>